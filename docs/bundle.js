/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={36:e=>{e.exports='<img class="form-image"/> <div class="title">{{activateTitle}}</div> <div class="sub-title">{{activateSubTitle}}</div> <form method="post" accept-charset="UTF-8" novalidate="novalidate" class="{{formStyle}}"> <input type="hidden" name="form_type" value="customer_login"/><input type="hidden" name="utf8" value="✓"/> </form> '},192:e=>{e.exports='<div class="container {{layout}}" style="display:none"> <div class="content"> <div class="loading" style="display:none"> <div class="loading-icon"></div> </div> <div class="btn-close js-close">+</div> <div class="landing" style="display:none">{{> landing}} </div> <div class="register" style="display:none">{{> register}} </div> <div class="activate" style="display:none">{{> activate}} </div> <div class="signin" style="display:none">{{> signin}} </div> <div class="js-shopify-response" style="display:none"></div> </div> </div> '},581:e=>{e.exports='<img class="form-image"/> <div class="title">{{loginRegister}}</div> <div class="sub-title">{{enterYourEmailToContinue}}</div> <div class="error" data-account-error=""></div> <form action="javascript:void(0);" class="{{formStyle}}"> <div> {{#hasSocialLogin }} <input type="submit" style="background:0 0;border:none;font-weight:900;cursor:pointer;position:absolute" disabled="" value="OK"/> {{/hasSocialLogin }} <div> <input class="input-text" name="email" placeholder="{{yourEmail}}" type="email"/> <label>{{yourEmail}}</label> </div> </div> {{#hasSocialLogin }} <div> <div class="or-social-login">Or</div> <a href="#" class="fb btn"> <i class="fa fa-facebook fa-fw"></i> Login with Facebook </a> <a href="#" class="google btn"><i class="fa fa-google fa-fw"></i> Login with Google+ </a> </div> {{/hasSocialLogin }} {{^hasSocialLogin }} <input type="submit" class="btn btn-primary" name="validate" disabled="" value="{{validate}}"/> {{/hasSocialLogin }} </form> '},195:e=>{e.exports='{{#hasChoice}} <div class="hasChoice choice-block single-choice {{#hasMultiLine}}multi-line{{/hasMultiLine }}"> {{#choiceList}} <div> {{#isChoiceTag}} <input type="checkbox" value="{{.}}" data-tag="{{choiceTag}}"/> {{/isChoiceTag}} {{^isChoiceTag}} <input type="checkbox" value="{{.}}" data-namespace="{{choiceNamespace}}" data-key="{{choiceKey}}"/> {{/isChoiceTag}} <label>{{.}}</label> </div> {{/choiceList}} </div> {{/hasChoice}} {{#hasFirstName }} <div class="hasFirstName"> <input required type="text" class="input-text" name="customer[first_name]" placeholder="{{yourFirstName}}"/> <label>{{yourFirstName}}</label> </div> {{/hasFirstName }} {{#hasLastName }} <div class="hasLastName"> <input required type="text" class="input-text" name="customer[last_name]" placeholder="{{yourLastName}}"/> <label>{{yourLastName}}</label> </div> {{/hasLastName }} {{#hasTelephone }} <div class="hasTelephone"> <input required type="text" class="input-text" placeholder="{{yourTelephone}}" name="address[phone]"/> <label>{{yourTelephone}}</label> </div> {{/hasTelephone }} <div class="hasEmail"> <input required type="email" placeholder="{{yourEmail}}" name="customer[email]" class="input-text"/> <label>{{yourEmail}}</label> </div> <div class="hasPassword"> <div class="eye-icon js-show-psw"></div> <input required type="password" name="customer[password]" class="input-text" placeholder="{{yourPassword}}" autocomplete="on"/> <label>{{yourPassword}}</label> </div> {{#hasBirth}} <div class="hasBirth js-date"> {{#isBirthTag}} <input class="input-text" required type="text" date-min="{{birthMin}}" date-max="{{birthMax}}" date-error="{{birthError}}" placeholder="{{birthPlaceholder}}" data-tag="{{birthTag}}"/> {{/isBirthTag}} {{^isBirthTag}} <input class="input-text" required type="text" date-min="{{birthMin}}" date-max="{{birthMax}}" date-error="{{birthError}}" placeholder="{{birthPlaceholder}}" data-namespace="{{birthNamespace}}" data-key="{{birthKey}}"/> {{/isBirthTag}} <label>{{birthPlaceholder}}</label> </div> {{/hasBirth}} {{#hasNewsletter }} <div class="hasNewsletter choice-block"> <div> <input type="checkbox" class="input-text"/> <label>{{subscribeNewsletter}}</label> </div> </div> {{/hasNewsletter }} <p class="text-center hasSubmit"> <input class="btn btn-primary" disabled="" type="submit" value="{{registerAccount}}"/> </p> '},910:e=>{e.exports='<img class="form-image"/> <div class="title">{{createAccount}}</div> <div class="sub-title text t-4">{{fillInfoToCreateAccount}}</div> <div class="error js-psw-policy"></div> <form method="post" id="RegisterForm" accept-charset="UTF-8" novalidate="novalidate" class="{{formStyle}}" data-blocks="{{orderedBlock}}"> <input type="hidden" name="return_to" value="{{redirectAfterRegister ||\n    \'/\'}}"/> <input type="hidden" name="customer[tags]" value=""/> <input type="hidden" name="form_type" value="create_customer"/><input type="hidden" name="utf8" value="✓"/> {{ >registerInputs }} </form> <p class="arrow-container js-back"><i class="arrow left"></i> Back</p> '},155:e=>{e.exports='<img class="form-image"/> <div class="title">{{loginTitle}}</div> <div class="sub-title">{{enterEmailPswToConnect}}</div> <div class="error js-psw-policy"></div> <form method="post" accept-charset="UTF-8" novalidate="novalidate" class="{{formStyle}}" data-login-redirect="{{loginRedirect}}"> <input type="hidden" name="form_type" value="customer_login"/><input type="hidden" name="utf8" value="✓"/> <div> <input type="email" name="customer[email]" autocomplete="email" class="input-text" placeholder="{{yourEmail}}"/> <label>{{yourEmail}}</label> </div> <div> <div class="eye-icon js-show-psw"></div> <input type="password" name="customer[password]" class="input-text" placeholder="{{yourPassword}}" autofocus autocomplete="on"/> <label>{{yourPassword}}</label> </div> <input class="btn btn-primary" disabled="" type="submit" value="{{signIn}}"/> </form> {{#doYouLostPsw }} <div class="secondary-action"> <a href="/account#recover-password" class="link">{{doYouLostPsw}}</a> </div> {{/doYouLostPsw}} '},327:(e,t,s)=>{"use strict";s.r(t)},503:(e,t,s)=>{"use strict";s.r(t)},450:(e,t,s)=>{"use strict";s.r(t)},500:(e,t,s)=>{"use strict";s.r(t)},442:(e,t,s)=>{"use strict";s.r(t)},277:(e,t,s)=>{"use strict";s.r(t)},466:function(e){e.exports=function(){"use strict";var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)};function s(e){return"function"==typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return null!=e&&"object"==typeof e&&t in e}var a=RegExp.prototype.test;var i=/\S/;function n(e){return!function(e,t){return a.call(e,t)}(i,e)}var l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var c=/\s*/,p=/\s+/,d=/\s*=/,u=/\s*\}/,h=/#|\^|\/|>|\{|&|=|!/;function g(e){this.string=e,this.tail=e,this.pos=0}function y(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function m(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}g.prototype.eos=function(){return""===this.tail},g.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var s=t[0];return this.tail=this.tail.substring(s.length),this.pos+=s.length,s},g.prototype.scanUntil=function(e){var t,s=this.tail.search(e);switch(s){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,s),this.tail=this.tail.substring(s)}return this.pos+=t.length,t},y.prototype.push=function(e){return new y(e,this)},y.prototype.lookup=function(e){var t,r,a,i=this.cache;if(i.hasOwnProperty(e))t=i[e];else{for(var n,l,c,p=this,d=!1;p;){if(e.indexOf(".")>0)for(n=p.view,l=e.split("."),c=0;null!=n&&c<l.length;)c===l.length-1&&(d=o(n,l[c])||(r=n,a=l[c],null!=r&&"object"!=typeof r&&r.hasOwnProperty&&r.hasOwnProperty(a))),n=n[l[c++]];else n=p.view[e],d=o(p.view,e);if(d){t=n;break}p=p.parent}i[e]=t}return s(t)&&(t=t.call(this.view)),t},m.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},m.prototype.parse=function(e,s){var o=this.templateCache,a=e+":"+(s||f.tags).join(":"),i=void 0!==o,l=i?o.get(a):void 0;return null==l&&(l=function(e,s){if(!e)return[];var o,a,i,l=!1,y=[],m=[],v=[],b=!1,w=!1,S="",I=0;function T(){if(b&&!w)for(;v.length;)delete m[v.pop()];else v=[];b=!1,w=!1}function E(e){if("string"==typeof e&&(e=e.split(p,2)),!t(e)||2!==e.length)throw new Error("Invalid tags: "+e);o=new RegExp(r(e[0])+"\\s*"),a=new RegExp("\\s*"+r(e[1])),i=new RegExp("\\s*"+r("}"+e[1]))}E(s||f.tags);for(var k,x,A,_,N,C,P=new g(e);!P.eos();){if(k=P.pos,A=P.scanUntil(o))for(var L=0,D=A.length;L<D;++L)n(_=A.charAt(L))?(v.push(m.length),S+=_):(w=!0,l=!0,S+=" "),m.push(["text",_,k,k+1]),k+=1,"\n"===_&&(T(),S="",I=0,l=!1);if(!P.scan(o))break;if(b=!0,x=P.scan(h)||"name",P.scan(c),"="===x?(A=P.scanUntil(d),P.scan(d),P.scanUntil(a)):"{"===x?(A=P.scanUntil(i),P.scan(u),P.scanUntil(a),x="&"):A=P.scanUntil(a),!P.scan(a))throw new Error("Unclosed tag at "+P.pos);if(N=">"==x?[x,A,k,P.pos,S,I,l]:[x,A,k,P.pos],I++,m.push(N),"#"===x||"^"===x)y.push(N);else if("/"===x){if(!(C=y.pop()))throw new Error('Unopened section "'+A+'" at '+k);if(C[1]!==A)throw new Error('Unclosed section "'+C[1]+'" at '+k)}else"name"===x||"{"===x||"&"===x?w=!0:"="===x&&E(A)}if(T(),C=y.pop())throw new Error('Unclosed section "'+C[1]+'" at '+P.pos);return function(e){for(var t,s=[],r=s,o=[],a=0,i=e.length;a<i;++a)switch((t=e[a])[0]){case"#":case"^":r.push(t),o.push(t),r=t[4]=[];break;case"/":o.pop()[5]=t[2],r=o.length>0?o[o.length-1][4]:s;break;default:r.push(t)}return s}(function(e){for(var t,s,r=[],o=0,a=e.length;o<a;++o)(t=e[o])&&("text"===t[0]&&s&&"text"===s[0]?(s[1]+=t[1],s[3]=t[3]):(r.push(t),s=t));return r}(m))}(e,s),i&&o.set(a,l)),l},m.prototype.render=function(e,t,s,r){var o=this.getConfigTags(r),a=this.parse(e,o),i=t instanceof y?t:new y(t,void 0);return this.renderTokens(a,i,s,e,r)},m.prototype.renderTokens=function(e,t,s,r,o){for(var a,i,n,l="",c=0,p=e.length;c<p;++c)n=void 0,"#"===(i=(a=e[c])[0])?n=this.renderSection(a,t,s,r,o):"^"===i?n=this.renderInverted(a,t,s,r,o):">"===i?n=this.renderPartial(a,t,s,o):"&"===i?n=this.unescapedValue(a,t):"name"===i?n=this.escapedValue(a,t,o):"text"===i&&(n=this.rawValue(a)),void 0!==n&&(l+=n);return l},m.prototype.renderSection=function(e,r,o,a,i){var n=this,l="",c=r.lookup(e[1]);if(c){if(t(c))for(var p=0,d=c.length;p<d;++p)l+=this.renderTokens(e[4],r.push(c[p]),o,a,i);else if("object"==typeof c||"string"==typeof c||"number"==typeof c)l+=this.renderTokens(e[4],r.push(c),o,a,i);else if(s(c)){if("string"!=typeof a)throw new Error("Cannot use higher-order sections without the original template");null!=(c=c.call(r.view,a.slice(e[3],e[5]),(function(e){return n.render(e,r,o,i)})))&&(l+=c)}else l+=this.renderTokens(e[4],r,o,a,i);return l}},m.prototype.renderInverted=function(e,s,r,o,a){var i=s.lookup(e[1]);if(!i||t(i)&&0===i.length)return this.renderTokens(e[4],s,r,o,a)},m.prototype.indentPartial=function(e,t,s){for(var r=t.replace(/[^ \t]/g,""),o=e.split("\n"),a=0;a<o.length;a++)o[a].length&&(a>0||!s)&&(o[a]=r+o[a]);return o.join("\n")},m.prototype.renderPartial=function(e,t,r,o){if(r){var a=this.getConfigTags(o),i=s(r)?r(e[1]):r[e[1]];if(null!=i){var n=e[6],l=e[5],c=e[4],p=i;0==l&&c&&(p=this.indentPartial(i,c,n));var d=this.parse(p,a);return this.renderTokens(d,t,r,p,o)}}},m.prototype.unescapedValue=function(e,t){var s=t.lookup(e[1]);if(null!=s)return s},m.prototype.escapedValue=function(e,t,s){var r=this.getConfigEscape(s)||f.escape,o=t.lookup(e[1]);if(null!=o)return"number"==typeof o&&r===f.escape?String(o):r(o)},m.prototype.rawValue=function(e){return e[1]},m.prototype.getConfigTags=function(e){return t(e)?e:e&&"object"==typeof e?e.tags:void 0},m.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!t(e)?e.escape:void 0};var f={name:"mustache.js",version:"4.1.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){v.templateCache=e},get templateCache(){return v.templateCache}},v=new m;return f.clearCache=function(){return v.clearCache()},f.parse=function(e,t){return v.parse(e,t)},f.render=function(e,s,r,o){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+((t(a=e)?"array":typeof a)+'" was given as the first argument for mustache#render(template, view, partials)'));var a;return v.render(e,s,r,o)},f.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return l[e]}))},f.Scanner=g,f.Context=y,f.Writer=m,f}()},518:(e,t,s)=>{const{updateCss:r,rendereTemplate:o}=s(624),{loadActions:a,openAccount:i}=s(97),{getConfiguration:n,kastorHandler:l}=s(215);t.loadTheme=async()=>{const e=await n();o(e.text),r(e.style),a()},l()},203:(e,t,s)=>{const{IDs:r}=s(182),{SIGNIN_ID:o,ACTIVATE_ID:a}=r,{LANDING_ID:i,REGISTER_ID:n}=r,{getCustomerStatus:l}=s(215),{toggleModules:c,$qq:p,debounce:d}=s(624),{toggleLoading:u}=s(253);let h,g;const y=async()=>{u();const e=await g;u(),e?.state?"enabled"===e.state?c(o):"disabled"===e.state&&c(a):v()},m=()=>{const e=h.querySelector("[type='email']").value;p("."+n,"form [type='email']").value=e,p("."+o,"form [type='email']").value=e},f=({target:e})=>{const t=h.querySelector("input[type='submit']"),s=e.value;/[\w.]+@\w+\.[a-z]{2,}/.test(s)?((e,t)=>{e.removeAttribute("disabled"),g=l(t)})(t,s):(e=>{e.setAttribute("disabled","true")})(t)},v=()=>{c(n)};t.init=()=>{h=p("."+i,"form"),h.addEventListener("input",d(f,100)),h.addEventListener("submit",y),h.addEventListener("submit",m)}},97:(e,t,s)=>{const{init:r}=s(203),{init:o}=s(982),{init:a}=s(837),{$q:i,toggleModules:n}=s(624),{LOGIN_BTN:l,STORAGE_CONFIG:c,IDs:p}=s(182),{LANDING_ID:d}=p,u=()=>{i("."+p.CONTAINER_ID).style.setProperty("display","none"),document.body.classList.remove("remove-scrolling")},h=e=>{const{isActive:t}=JSON.parse(localStorage.getItem(c));if(!globalThis.__st?.cid&&t){e?.preventDefault(),e?.stopPropagation(),n(d);const t=i("."+p.CONTAINER_ID);t.style.setProperty("display","flex"),t.classList.contains("popover")&&((e,t)=>{const s=parseInt(getComputedStyle(t).getPropertyValue("width"));t.style.setProperty("left",e.clientX-s/2+"px"),t.style.setProperty("top",e.clientY+20+"px")})(e,t)}};t.openAccount=h;const g=document.querySelector.bind(document);t.loadActions=()=>{g(l)?.addEventListener("click",h,!0),i(".js-close").addEventListener("click",u),r(),o(),a()}},837:(e,t,s)=>{const{IDs:r}=s(182),{REGISTER_ID:o,SIGNIN_ID:a,LANDING_ID:i}=r,{toggleModules:n,$q:l,toggleSecret:c}=s(624),{isFormFilled:p,checkInputs:d,sortBlocks:u}=s(624),{storeMetafieldIntoShopify:h}=s(215),{STORAGE_METAFIELD:g}=s(182),y={form:`.${o} form`,login:`.${o} .js-login`,pswDiffError:`.${o} .js-error .js-psw-diff`,pswFormatError:`.${o} .js-error .js-psw-valid`},m=({target:e,currentTarget:t})=>{t.classList.contains("multi-choice")||(t.querySelectorAll("[type='checkbox']").forEach((e=>{e.checked=!1})),e.checked=!0)},f=({target:e})=>{e.value.length>2&&e.closest("form").querySelector("[type='submit']").removeAttribute("disabled");const t=l(y.form).querySelector("input[type='submit']");p(l(y.form))?t.removeAttribute("disabled"):t.setAttribute("disabled","true")},v=async e=>{e.preventDefault(),(()=>{const e=Array.from(l(y.form).querySelectorAll("\n        [type='checkbox'][data-tag]:checked,\n        [type='text'][data-tag], \n        [type='date'][data-tag]\n    ")).map((e=>`${e.getAttribute("data-tag")}:${e.value}`));l('[name="customer[tags]"]').value=e.join(", ")})(),(()=>{const e=Array.from(l(y.form).querySelectorAll("\n        [type='checkbox'][data-key]:checked,\n        [type='text'][data-key], \n        [type='date'][data-key]\n    ")).map((e=>({namespace:e.getAttribute("data-namespace"),key:e.getAttribute("data-key"),value:e.value})));localStorage.setItem(g,JSON.stringify(e)),console.log("localStorage",localStorage.getItem(g))})();const{sendHttpRequest:t}=s(215);if(!await d(l(y.form)))return null;l(y.form).action="/account";const r=await t("POST",e);console.log("shopify response",r)},b=e=>{const t=l(y.form).querySelector(".carousel"),s=parseInt(getComputedStyle(t).getPropertyValue("width"),10),r=/js-next/.test(e.target.className)?s:-s;t.scrollBy({left:r,behavior:"smooth"})},w=({target:e})=>e.type="date";t.init=()=>{const e=l(y.form);u(),e.addEventListener("input",f),e.querySelectorAll(".js-next, .js-prev").forEach((e=>e.addEventListener("click",b))),e.addEventListener("submit",v),l(y.login)?.addEventListener("click",(()=>n(a))),e.querySelector(".js-show-psw")?.addEventListener("click",c),e.querySelector(".choice-block")?.addEventListener("click",m),l(".js-date input")?.addEventListener("focus",w),h(),l(".js-back")?.addEventListener("click",(()=>n(i)))}},982:(e,t,s)=>{const{IDs:r}=s(182),{SIGNIN_ID:o,REGISTER_ID:a}=r,{$q:i,isValidEmail:n,toggleSecret:l}=s(624),{sendHttpRequest:c}=s(215),{toggleModules:p}=s(624),d={form:`.${o} form`,pswFormatError:`.${o} .js-error .js-psw-valid`,register:".js-create-account",wrongPsw:".js-psw-wrong"},u=async e=>{if(e.preventDefault(),i(d.form).action="/account/login",(await c("POST",e)).isLogged){const{shop:e}=globalThis?.Shopify,t=i(d.form).getAttribute("data-login-redirect");globalThis.location.href=`https://${e}/${t}`}},h=e=>{const t=i(d.form),s=t.querySelector('[name="customer[email]"]').value;n(s)?t.querySelector("[type='submit']").removeAttribute("disabled"):t.querySelector("[type='submit']").setAttribute("disabled","")},g=()=>p(a);t.init=()=>{const e=i(d.form);e.addEventListener("input",h),e.addEventListener("submit",u),e.querySelector(".js-show-psw")?.addEventListener("click",l),i(d.register)?.addEventListener("click",g)}},182:e=>{e.exports={LOGIN_BTN:".site-header__account",PROXY_PATH:"apps/dev",STORAGE_KEY:"shopify-loginpopup-metafields",STORAGE_CONFIG:"shopify-loginpopup-configuration",CONFIG_ENDPOINT:"https://login-popup-dev-theme.s3.amazonaws.com",CSS:"http://localhost:8081/main.css",IDs:{APP_ID:"login-popup",CONTAINER_ID:"container",LANDING_ID:"landing",REGISTER_ID:"register",SIGNIN_ID:"signin",ACTIVATE_ID:"activate"}}},215:(e,t,s)=>{const{getCustomerStatus:r,getConfiguration:o,storeMetafieldIntoShopify:a}=s(44),{sendHttpRequest:i}=s(98),{kastorHandler:n}=s(943);t.storeMetafieldIntoShopify=a,t.getCustomerStatus=r,t.sendHttpRequest=i,t.getConfiguration=o,t.kastorHandler=n},943:(e,t,s)=>{const{rendereTemplate:r,$q:o,showError:a,debounce:i}=s(624),{getBlocksAttr:n}=s(816),l=e=>{const{loadActions:t}=s(97),{toggleModules:r}=s(624);r(e),o(".container").style.setProperty("display","flex"),t()},c=e=>(e.data?e.data:e.detail.data).data,p=e=>{const t=(e=>(e.data?e.data:e.detail.data).target)(e);if("block:reorder"===t){const t=(({blocks:e,order:t})=>{let s=(r=e,Object.keys(r).map((e=>({[Object.keys(r[e])[0]]:e}))).filter((e=>"undefined"!==Object.keys(e)[0])));var r;return s=s.sort(((e,s)=>t.indexOf(Object.keys(e)[0])-t.indexOf(Object.keys(s)[0]))),s.map((e=>Object.values(e)[0].split("|")[1]))})(c(e));return r({orderedBlock:t}),l("register"),null}if("block:remove"===t){const{block_type_id:t}=c(e),s=t.split("|")[1],o=n().filter((e=>e!==s));return r({orderedBlock:o}),r({[s]:!1}),l("register"),null}if("block:add"===t){const{block_type_id:t,block_settings:s}=c(e),[o,a]=t.split("|"),i=Object.keys(s)[0].split("|")[1],n=Object.values(s)[0];return r({[i]:n}),r({[a]:!0}),l(o),null}(e=>{const[t,o]=(e=>{const t=c(e);if(!t)return[void 0,void 0];const{setting_id:s,section_type:r,block_type_id:o}=t;return[s||r||o,"block:remove"!=c(e)&&t.value]})(e);if(!t)return null;const[,i,n,p]=t.match(/^(.*?)\|(.*?)\|(.*?)$/),d="object"==typeof o?o:`${o}${p}`,{updateCss:u}=s(624);/--animation/.test(n)||u({"--animation":"none"}),/^--/.test(n)?u({[n]:d}):r({[n]:"false"!=d&&d}),i&&l(i),/^psw.*Err$/.test(n)&&a([o])})(e)};t.kastorHandler=()=>globalThis.addEventListener("message",i(p,99))},44:(e,t,s)=>{const{PROXY_PATH:r,STORAGE_METAFIELD:o,STORAGE_CONFIG:a,CONFIG_ENDPOINT:i}=s(182);t.getCustomerStatus=async e=>{const t=globalThis?.Shopify?.shop,s=t?`https://${t}/${r}/get-customer-status/${e}`:"https://api.mocki.io/v1/ce5f60e2";try{const e=await fetch(s);return await e.json()}catch(e){return console.log("error in proxy.js: ",e),{}}},t.getConfiguration=async()=>{globalThis.Shopify?.shop;const e=await globalThis.fetch("data/configuration.json",{headers:{pragma:"no-cache"}}),t=(e=>{const{text:t}=e;return e.text.isChoiceTag="hasTag"===t.isChoiceTag,e.text.isBirthTag="hasTag"===t.isBirthTag,t.orderedBlock.forEach((t=>e.text[t]=!0)),e})(await e.json());return localStorage.setItem(a,JSON.stringify(t)),t},t.storeMetafieldIntoShopify=async()=>{const e=globalThis?.__st?.cid,t=localStorage.getItem(o);if(!t||!e)return null;const s=`https://${globalThis?.Shopify?.shop}/${r}/set-metafield-in-shopify`,a={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cid:e+"",metafields:JSON.parse(t)})},i=await globalThis.fetch(s,a);await i.json()&&localStorage.removeItem(o)}},98:(e,t,s)=>{const{$q:r,showError:o}=s(624);t.sendHttpRequest=(e,t)=>new Promise(((s,r)=>{const o=new XMLHttpRequest;o.open(e,t.target.action),o.send(new FormData(t.target)),o.onload=()=>{o.status>=400?r(o.response):s(a(t,o.response))},o.onerror=e=>r("Server error: "+e)}));const a=({target:e},t)=>{const s={isLogged:null!=(a=(new DOMParser).parseFromString(t,"text/html")).querySelector("#customer_logout_link"),hasWrongPsw:null!=a.querySelector("#customer_login"),hasChallenge:null!=a.querySelector(".shopify-challenge__button.btn")};var a;return console.log(s),s.isLogged?r(".js-close").click():s.hasWrongPsw?o(["Wrong password or email"]):s.hasChallenge&&e.submit(),s}},561:(e,t,s)=>{const r=s(192),o=s(581),a=s(910),i=s(195),n=s(155),l=s(36);e.exports={pages:{container:r,landing:o,register:a,signIn:n,activate:l,registerInputs:i}}},624:(e,t,s)=>{const{rendereTemplate:r,updateCss:o,sortBlocks:a}=s(816),{toggleModules:i}=s(554),{isValidEmail:n,isFormFilled:l,checkInputs:c}=s(522),{showError:p,toggleSecret:d}=s(522),{$q:u,$qq:h,getRootNode:g}=s(402);t.updateCss=o,t.rendereTemplate=r,t.toggleModules=i,t.isFormFilled=l,t.showError=p,t.isValidEmail=n,t.$q=u,t.$qq=h,t.sortBlocks=a,t.checkInputs=c,t.debounce=(e,t)=>{let s;return(...r)=>{clearTimeout(s),s=setTimeout((()=>e(...r)),t)}},t.toggleSecret=d,t.getRootNode=g},522:(e,t,s)=>{const{$q:r}=s(402),o=".js-psw-policy",{STORAGE_CONFIG:a}=s(182),i=e=>{const t=new Date(e.value).getTime(),s=(new Date).getTime();return parseInt((s-t)/864e5)/365},n=e=>{const t=document.createElement("ul");e.forEach((e=>{const s=document.createElement("li");s.appendChild(document.createTextNode(e)),t.appendChild(s)}));const s=r('div[style*="display: block"] .js-psw-policy');return s.appendChild(t),s.style.setProperty("display","block"),!1};t.toggleSecret=({target:e})=>{const t=e.nextElementSibling;t.type="password"===t.type?"text":"password"},t.isFormFilled=e=>Array.from(e.querySelectorAll("input[required]")).every((e=>e.value)),t.checkInputs=async e=>{r(o).innerText="",r(o).style.setProperty("display","none");const t=[],s=(e=>Array.from(new FormData(e)).reduce(((e,t)=>({...e,[t[0]]:t[1]})),{}))(e);return t.push(...await(async e=>{const t=e["customer[password]"],s=[],r=JSON.parse(localStorage.getItem(a)).text;return t.length<r.pswMinLength&&s.push(r.pswMinLengthErr),t.length>r.pswMaxLength&&s.push(r.pswMaxLengthErr),r.pswUppercase&&!/(?=.*[A-Z])/.test(t)&&s.push(r.pswUppercaseErr),r.hasPswNumber&&!/(?=.*\d)/.test(t)&&s.push(r.pswNumberErr),r.hasPswSpecialCharacter&&!/(?=.*[\W|_])/.test(t)&&s.push(r.pswSpecialCharacterErr),r.hasPswUppercase&&!/[A-Z]/.test(t)&&s.push(r.pswUppercaseErr),s})(s)),t.push(...(()=>{const e=r("[type='date']");if(!e)return[];const{minDate:t,maxDate:s,error:o,customerAge:a}=(e=>({minDate:e.getAttribute("date-min"),maxDate:e.getAttribute("date-max"),error:e.getAttribute("date-error"),customerAge:i(e)}))(e);return t>a||s<a?[o]:[]})()),0===t.length||n(t)&&!1},t.isValidEmail=e=>/\S+@\S+\.\S+/.test(e),t.showError=n},816:(e,t,s)=>{const{IDs:r}=s(182),o=document.querySelector.bind(document),{REGISTER_ID:a}=r,{APP_ID:i}=r,n=s(466),{pages:l}=s(561);let c={};const p=()=>{const e=o(`.${a} form`).getAttribute("data-blocks");return e.length>0?e.split(","):[]};t.getBlocksAttr=p,t.sortBlocks=()=>{p().forEach(((e,t)=>o("."+e)?.style?.setProperty("order",t)))},t.updateCss=e=>{!function e(t,s){null!==t&&"object"==typeof t?Object.entries(t).forEach((([t,s])=>e(s,t))):o("#"+i).style.setProperty(s,t)}(e=(e=>{let t;return t=e["--container-bg-image"],t&&(e["--container-bg-image"]=`url(${t})`),t=e["--form-header-image"],t&&(e["--form-header-image"]=`url(${t})`),e})(e))},t.rendereTemplate=e=>{const{getRootNode:t}=s(624);e=(e=>{const t=Reflect.ownKeys(e).length>1,s=Reflect.ownKeys(e)[0];return t?c=e:c[s]=e[s],c})(e),t().innerHTML=n.render(l.container,e,{landing:l.landing,register:l.register,activate:l.activate,signin:l.signIn,registerInputs:l.registerInputs})}},402:(e,t,s)=>{const{IDs:r}=s(182),o=()=>document.querySelector("#"+r.APP_ID);t.getRootNode=o,t.$q=e=>o().querySelector(e),t.$qq=(e,t)=>o().querySelector(e).querySelector(t)},253:(e,t,s)=>{const{IDs:r}=s(182),{APP_ID:o,CONTAINER_ID:a}=r,i=document.querySelector.bind(document);t.toggleLoading=()=>{const e=i(`#${o} .loading`);"none"==e.style.getPropertyValue("display")?(e.style.setProperty("display","block"),i("."+a).style.setProperty("opacity",.2)):(e.style.setProperty("display","none"),i("."+a).style.setProperty("opacity",1))}},554:(e,t,s)=>{const{IDs:r}=s(182),{LANDING_ID:o,REGISTER_ID:a,SIGNIN_ID:i,ACTIVATE_ID:n}=r,{$q:l}=s(402);t.toggleModules=e=>{l("."+o).style.setProperty("display","none"),l("."+a).style.setProperty("display","none"),l("."+i).style.setProperty("display","none"),l("."+n).style.setProperty("display","none"),l("."+e).style.setProperty("display","block")}}},t={};function s(r){if(t[r])return t[r].exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,s),o.exports}s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{s(442),s(500),s(503),s(277),s(450),s(327);const{IDs:e,CSS:t}=s(182),r=globalThis.document.createElement("div");r.setAttribute("id",e.APP_ID),globalThis.document.body.append(r);const{loadTheme:o}=s(518);o(),(e=>{const t=`<link rel="stylesheet" href="${e}" />`;document.getElementsByTagName("head")[0].insertAdjacentHTML("afterbegin",t)})(t)})()})();